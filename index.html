<!DOCTYPE html>
<html>
  <head>
    <title>Mapa Interactivo</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css"
    />
    <style>
      #map {
        height: 950px;
      }
      .menu {
  position: fixed;
  top: 1vh;           /* 1% del alto de la ventana */
  left: 1vw;          /* 1% del ancho de la ventana */
  z-index: 1000;
  background: rgba(255, 255, 255, 0.85);
  padding: 0.5em;     /* relativo al tamaño de fuente */
  border-radius: 5px;
  display: flex;
  flex-wrap: wrap;    /* permite que los botones bajen de línea si hace falta */
}

button {
  margin: 2px;
  padding: 5px 5px;
  font-size: 10px;
}

.leaflet-draw.leaflet-control {
  margin-top: 5vh !important; /* baja los botones del plugin de dibujo relativo a la ventana */
}

/* Media queries opcionales para pantallas muy chicas */
@media (max-width: 600px) {
  .menu {
    top: 0.5vh;
    left: 0.5vw;
    padding: 0.3em;
  }
  button {
    padding: 0.3em 0.6em;
    font-size: 0.9em;
  }
}
      .leaflet-draw.leaflet-control {
        margin-top: 100px !important;
      }
    </style>
  </head>
  <body>
    <div class="menu">
      <button onclick="verTerritorios()">Área Grande</button>
      <button onclick="irATerritorio(1)">Territorio 1</button>
      <button onclick="irATerritorio(2)">Territorio 2</button>
      <button onclick="exportarPoligonos()">Exportar polígonos</button>
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>

    <script>
      // MAPA BASE
      var map = L.map("map", { maxZoom: 22, zoomControl: false }).setView(
        [28.611, -106.071],
        15
      );
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "© OpenStreetMap",
        maxZoom: 22,
      }).addTo(map);

      var poligonos = [];

      // CARGAR TODOS LOS JS MODULARES AL INICIO
      [
        "area_grande.js",
        "territorio1.js",
        "territorio2.js",
        "dibujo.js",
      ].forEach((f) => {
        let s = document.createElement("script");
        s.src = f;
        document.body.appendChild(s);
      });

      // FUNCIONES ZOOM
      function verTerritorios() {
        if (areaGrande) map.fitBounds(areaGrande.getBounds());
      }
      function irATerritorio(n) {
        if (poligonos[n - 1]) map.fitBounds(poligonos[n - 1].getBounds());
      }
    </script>
  </body>
</html>
